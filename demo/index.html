<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>mpr-ui Demo</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/MarcoPoloResearchLab/mpr-ui@latest/mpr-ui.css"
    />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.5/dist/module.esm.js"
      type="module"
    ></script>
    <script
      id="mpr-ui-bundle"
      defer
      src="https://cdn.jsdelivr.net/gh/MarcoPoloResearchLab/mpr-ui@latest/mpr-ui.js"
    ></script>
    <script
      src="https://accounts.google.com/gsi/client"
      async
      defer
    ></script>
  </head>
  <body data-demo-palette="default">
    <mpr-header
      id="demo-header"
      brand-label="Marco Polo Research Lab"
      brand-href="https://mprlab.com/"
      nav-links='[
        { "label": "Docs", "href": "https://github.com/MarcoPoloResearchLab/mpr-ui/blob/master/README.md" },
        { "label": "Architecture", "href": "https://github.com/MarcoPoloResearchLab/mpr-ui/blob/master/ARCHITECTURE.md" }
      ]'
      site-id="991677581607-r0dj8q6irjagipali0jpca7nfp8sfj9r.apps.googleusercontent.com"
      login-path="/auth/google"
      logout-path="/auth/logout"
      nonce-path="/auth/nonce"
      settings-label="Settings"
      theme-config='{"initialMode":"dark","targets":["body"],"attribute":"data-demo-theme"}'
    >
    </mpr-header>
    <main>
      <h1>MPR UI Demo</h1>
      <p>
        This page demonstrates how to use the
        <strong>authentication header</strong> and <strong>footer</strong>
        helpers provided by <code>mpr-ui.js</code>.
      </p>

      <section aria-labelledby="auth-demo-title">
        <h2 id="auth-demo-title">Authentication Header</h2>
        <p>
          The sticky header at the top of the page is the real
          <code>&lt;mpr-header&gt;</code> custom element. The controls below talk to it
          via DOM events so you can observe how declarative integrations behave with
          the mocked Google Identity Services (GIS) flow.
        </p>

        <div class="auth-card">
          <p>
            Interact with the header at the top of the page and observe how the
            dataset and events change below.
          </p>

          <div class="auth-actions">
            <button id="trigger-prompt">Prompt Sign-In (GIS)</button>
            <button class="secondary" id="sign-out">Sign Out via Header</button>
          </div>

          <div>
            <h3>Current Profile Dataset</h3>
            <dl id="profile-dataset">
              <dt>data-user-id</dt>
              <dd id="profile-id">â€”</dd>
              <dt>data-user-email</dt>
              <dd id="profile-email">â€”</dd>
              <dt>data-user-display</dt>
              <dd id="profile-display">â€”</dd>
              <dt>data-user-avatar-url</dt>
              <dd id="profile-avatar">â€”</dd>
            </dl>
          </div>

          <div>
            <h3>Event Log</h3>
            <div id="event-log" class="event-log" aria-live="polite"></div>
          </div>
        </div>

        <pre><code>&lt;mpr-header
  brand-label="Marco Polo Research Lab"
  site-id="&lt;YOUR_GIS_CLIENT_ID&gt;"
  login-path="/auth/google"
  logout-path="/auth/logout"
  nonce-path="/auth/nonce"
  nav-links='[{ "label": "Docs", "href": "#docs" }]'
&gt;&lt;/mpr-header&gt;
</code></pre>
      </section>

      <section aria-labelledby="footer-demo-title">
        <h2 id="footer-demo-title">Footer Helpers</h2>
        <p>
          Scroll to the bottom of the page to see the real
          <code>&lt;mpr-footer&gt;</code> in action. This section also keeps an
          imperative example so you can contrast the API surfaces.
        </p>

        <div
          id="alpine-footer"
          x-data="(() => {
            const fetchCatalog = window.MPRUI && typeof window.MPRUI.getFooterSiteCatalog === 'function'
              ? window.MPRUI.getFooterSiteCatalog
              : () => [];
            return mprFooter({
              prefixText: 'Built by',
              toggleLabel: 'MPRLab Sites',
              links: fetchCatalog()
            });
          })()"
          x-init="init()"
        ></div>

        <div class="auth-actions" style="margin-top: 1rem">
          <button id="rotate-footer">Rotate Footer Links</button>
        </div>
        <div
          id="imperative-footer-host"
          class="demo-footer-slot"
          aria-label="Imperative footer host"
        ></div>
      </section>

      <section aria-labelledby="theme-demo-title">
        <h2 id="theme-demo-title">Shared Theme Tokens</h2>
        <p>
          The header and footer now respond to CSS custom properties exported by
          <code>mpr-ui.js</code>. Pick a palette to override the shared tokens without touching JavaScript.
        </p>
        <div class="auth-actions">
          <button data-demo-palette-toggle="default">Default Palette</button>
          <button data-demo-palette-toggle="sunrise">Sunrise Palette</button>
          <button data-demo-palette-toggle="forest">Forest Palette</button>
        </div>
        <div class="auth-actions" style="margin-top: 1rem">
          <button data-demo-theme-mode="light">Switch to Light Mode</button>
          <button data-demo-theme-mode="dark">Switch to Dark Mode</button>
        </div>
        <pre><code>body[data-demo-palette="sunrise"] {
  --mpr-color-surface-primary: rgba(252,232,222,0.92);
  --mpr-color-accent: #f97316;
}</code></pre>
      </section>

      <section aria-labelledby="ce-demo-title">
        <h2 id="ce-demo-title">Custom Elements</h2>
        <p>
          Prefer declarative markup? Drop in the `<mpr-header>` and `<mpr-footer>`
          tags and configure them with HTML attributes. Slots let you inject custom
          actions without leaving template land. See <code>docs/custom-elements.md</code>
          for the full attribute/event matrix.
        </p>
        <div class="custom-elements-preview">
          <mpr-header
            brand-label="Custom Research"
            brand-href="/"
            nav-links='[
              { "label": "Docs", "href": "#docs" },
              { "label": "Support", "href": "#support" }
            ]'
            site-id="991677581607-r0dj8q6irjagipali0jpca7nfp8sfj9r.apps.googleusercontent.com"
            theme-config='{"initialMode":"light"}'
          >
            <button slot="nav-right" class="demo-link">Request Access</button>
          </mpr-header>
          <mpr-footer
            prefix-text="Built with"
            privacy-link-label="Privacy &amp; Terms"
            links='[{ "label": "Docs", "url": "#docs" }]'
          >
            <span slot="menu-prefix">Explore</span>
            <a
              slot="menu-links"
              href="https://mprlab.com"
              target="_blank"
              rel="noopener noreferrer"
            >
              Visit mprlab.com
            </a>
            <small slot="legal">Â© Marco Polo Research</small>
          </mpr-footer>
          <mpr-theme-toggle
            variant="button"
            label="Theme"
            theme-config='{"initialMode":"dark"}'
          ></mpr-theme-toggle>
          <mpr-login-button
            site-id="991677581607-r0dj8q6irjagipali0jpca7nfp8sfj9r.apps.googleusercontent.com"
            login-path="/auth/google"
            logout-path="/auth/logout"
            nonce-path="/auth/nonce"
          ></mpr-login-button>
        </div>
      </section>

      <section aria-labelledby="aux-elements-title">
        <h2 id="aux-elements-title">Auxiliary Custom Elements</h2>
        <p>
          Use the lightweight `<mpr-settings>` launcher to host inline controls and
          `<mpr-sites>` to drop the packaged site catalog anywhere on the page. Both
          components emit events so you can react without extra glue code.
        </p>
        <div class="custom-elements-preview">
          <mpr-settings
            id="demo-settings"
            label="Demo Settings"
            icon="ðŸ§ª"
          >
            <div class="auth-card">
              <label>
                <input type="checkbox" checked />
                <span>Enable mock beta banner</span>
              </label>
              <label>
                <input type="checkbox" />
                <span>Send weekly updates</span>
              </label>
            </div>
          </mpr-settings>
          <mpr-sites
            id="demo-sites"
            variant="grid"
            columns="2"
            heading="Featured Sites"
          ></mpr-sites>
        </div>
      </section>
    </main>

    <script type="module" src="./demo.js"></script>
    <mpr-footer
      id="page-footer"
      prefix-text="Built by"
      privacy-link-label="Privacy &amp; Terms"
      privacy-link-href="#privacy"
      theme-config='{"targets":["body"],"attribute":"data-demo-theme"}'
    >
      <span slot="menu-prefix">Explore</span>
      <a
        slot="menu-links"
        href="https://mprlab.com"
        target="_blank"
        rel="noopener noreferrer"
      >
        Visit mprlab.com
      </a>
      <small slot="legal">Â© Marco Polo Research</small>
    </mpr-footer>
  </body>
</html>

